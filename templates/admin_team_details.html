<!DOCTYPE html>
<html lang="en">
<head>
    <script>
      (function(){
        var overlay = document.createElement('div');
        overlay.id = 'global-loading-overlay';
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100vw';
        overlay.style.height = '100vh';
        overlay.style.background = '#fffbe6';
        overlay.style.zIndex = '99999';
        overlay.style.display = 'flex';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';
        overlay.innerHTML = '<div id="lottie-global-box" style="width:220px;height:220px;"></div><div style="position:absolute;bottom:10vh;left:0;width:100vw;text-align:center;font-size:2em;font-weight:900;color:#d6af41;letter-spacing:2px;font-family:Montserrat,Arial,sans-serif;">Loading...</div>';
        document.body.appendChild(overlay);
        var script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js';
        script.onload = function() {
          window.lottie && window.lottie.loadAnimation({
            container: document.getElementById('lottie-global-box'),
            renderer: 'svg',
            loop: true,
            autoplay: true,
            path: '/UI/Treasure box.json'
          });
        };
        document.head.appendChild(script);
      })();
    </script>
    <script>
      (function(){
        var overlay = document.createElement('div');
        overlay.id = 'global-loading-overlay';
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100vw';
        overlay.style.height = '100vh';
        overlay.style.background = '#fffbe6';
        overlay.style.zIndex = '99999';
        overlay.style.display = 'flex';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';
        overlay.innerHTML = '<div id="lottie-global-box" style="width:220px;height:220px;"></div><div style="position:absolute;bottom:10vh;left:0;width:100vw;text-align:center;font-size:2em;font-weight:900;color:#d6af41;letter-spacing:2px;font-family:Montserrat,Arial,sans-serif;">Loading...</div>';
        document.body.appendChild(overlay);
      })();
    </script>
  <script src="{{ url_for('static', filename='js/loading.js') }}"></script>
  <script src="{{ url_for('static', filename='js/admin_team_details.js') }}"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Team Details - Admin</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:900,700" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_team_details.css') }}">
</head>
<body>
  <div class="bg-team" aria-hidden="true">
    {% for _ in range(12) %}
      <span>TEAM</span>
    {% endfor %}
  </div>
  <div class="header-bar">
    <button class="hamburger" id="hamburgerBtn" aria-label="Open menu" aria-controls="drawerMenu" aria-expanded="false" onclick="openDrawer()">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="avatar" onclick="window.location.href='/admin/profile'" title="Profile"></div>
  </div>
  <nav class="drawer" id="drawerMenu" aria-hidden="true" tabindex="-1" style="background:#d6af41; border-top-right-radius:2.2em;">
    <div class="drawer-header" style="padding-top:2em;">
      <span class="drawer-title" style="font-size:1.5em; font-weight:900; color:#1a232b; letter-spacing:2px;">MEMOQUEST</span>
      <button class="drawer-close" aria-label="Close menu" onclick="closeDrawer()" style="font-size:2em; color:#1a232b; background:none; border:2px solid #1a232b; border-radius:0.7em; padding:0.1em 0.3em; margin-left:1em;">&rarr;</button>
    </div>
    <div class="drawer-content" style="flex:1; overflow-y:auto; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; gap:2.5em;">
        <div style="width:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:1.2em;">
          <div style="font-size:2em; font-weight:900; color:#1a232b; margin-bottom:0.7em; letter-spacing:1px; text-align:center;">HELLO, ADMIN</div>
          <form method="get" action="/admin" style="width:100%;margin:0;padding:0;">
            <button type="submit" class="drawer-box-btn" style="width:100%;max-width:320px;height:3.2em;font-size:1.2em;margin:0 auto;display:flex;align-items:center;gap:1em;">
              <span class="btn-icon" aria-hidden="true">
                <svg width="1.3em" height="1.3em" viewBox="0 0 24 24" fill="none" style="display:block;" xmlns="http://www.w3.org/2000/svg"><path d="M3 12l9-9 9 9v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-9z" stroke="#d6af41" stroke-width="2"/></svg>
              </span>
              HOME
            </button>
          </form>
          <form method="get" action="/admin/team_details" style="width:100%;margin:0;padding:0;">
            <button type="submit" class="drawer-box-btn" style="width:100%;max-width:320px;height:3.2em;font-size:1.2em;margin:0 auto;display:flex;align-items:center;gap:1em;">
              <span class="btn-icon" aria-hidden="true" style="background:linear-gradient(135deg,#fffbe6 60%,#ffe7b2 100%);">
                <svg width="1.3em" height="1.3em" viewBox="0 0 24 24" fill="none" style="display:block;" xmlns="http://www.w3.org/2000/svg"><path d="M12 12c2.7 0 8 1.34 8 4v2H4v-2c0-2.66 5.3-4 8-4Zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" stroke="#d6af41" stroke-width="2"/></svg>
              </span>
              TEAM DETAILS
            </button>
          </form>
          <form method="get" action="/admin/leaderboard" style="width:100%;margin:0;padding:0;">
            <button type="submit" class="drawer-box-btn" style="width:100%;max-width:320px;height:3.2em;font-size:1.2em;margin:0 auto;display:flex;align-items:center;gap:1em;">
              <span class="btn-icon" aria-hidden="true">
                <svg width="1.3em" height="1.3em" viewBox="0 0 24 24" fill="none" style="display:block;" xmlns="http://www.w3.org/2000/svg"><path d="M7 21V7m5 14V3m5 18v-8" stroke="#d6af41" stroke-width="2"/></svg>
              </span>
              LEADERBOARD
            </button>
          </form>
          <form method="get" action="/admin/manual_elimination" style="width:100%;margin:0;padding:0;">
            <button type="submit" class="drawer-box-btn" style="width:100%;max-width:320px;height:3.2em;font-size:1.2em;margin:0 auto;display:flex;align-items:center;gap:1em;">
              <span class="btn-icon" aria-hidden="true">
                <svg width="1.3em" height="1.3em" viewBox="0 0 24 24" fill="none" style="display:block;" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M6 18L18 6" stroke="#d6af41" stroke-width="2"/></svg>
              </span>
              MANUAL ELIMINATION
            </button>
          </form>
          <form method="get" action="/admin/game_constraints" style="width:100%;margin:0;padding:0;">
            <button type="submit" class="drawer-box-btn" style="width:100%;max-width:320px;height:3.2em;font-size:1.2em;margin:0 auto;display:flex;align-items:center;gap:1em;">
              <span class="btn-icon" aria-hidden="true">
                <svg width="1.3em" height="1.3em" viewBox="0 0 24 24" fill="none" style="display:block;" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="9" stroke="#d6af41" stroke-width="2"/><path d="M12 8v4l3 3" stroke="#d6af41" stroke-width="2"/></svg>
              </span>
              GAME CONSTRAINTS
            </button>
          </form>
        </div>
    </div>
  </nav>
  <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
  <style>
    .hamburger {
      width: 2.6em;
      height: 2.6em;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #fff;
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 8px #0001;
      cursor: pointer;
      padding: 0.4em;
      margin-right: 0.4em;
    }
    .hamburger span {
      display: block;
      width: 1.8em;
      height: 0.32em;
      background: #1a232b;
      border-radius: 2px;
      margin: 0.19em 0;
      transition: all 0.2s;
    }
    .avatar {
      position: fixed;
      top: 18px;
      right: 18px;
      width: 44px;
      height: 44px;
      background: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      z-index: 4;
      font-size: 2.2rem;
      cursor: pointer;
    }
    .avatar::before {
      content: "";
      display: block;
      width: 24px;
      height: 24px;
      background: url('https://cdn-icons-png.flaticon.com/512/64/64572.png') center/cover no-repeat;
    }
    @media (max-width: 600px) {
      .avatar { width: 28px; height: 28px; top: 6px; right: 6px; }
      .avatar::before { width: 14px; height: 14px; }
    }
    .drawer {
      position: fixed;
      top: 0;
      left: 0;
      width: 85vw;
      max-width: 420px;
      height: 100vh;
      background: #d6af41;
      box-shadow: 2px 0 16px #0002;
      z-index: 3000;
      transform: translateX(-100%);
      transition: transform 0.25s cubic-bezier(.4,0,.2,1);
      display: flex;
      flex-direction: column;
      border-top-right-radius: 2.2em;
      outline: none;
    }
    .drawer.open {
      transform: translateX(0);
    }
    .drawer-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.2em 1.2em 0.5em 1.2em;
    }
    .drawer-title {
      font-size: 1.3em;
      font-weight: 900;
      color: #1a232b;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    .drawer-close {
      background: none;
      border: 2px solid #1a232b;
      font-size: 2em;
      color: #1a232b;
      cursor: pointer;
      border-radius: 0.7em;
      padding: 0.1em 0.3em;
      margin-left: 1em;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f6e4cb;
    }
    .drawer-content {
      padding: 0 1.2em 1.2em 1.2em;
      flex: 1;
      overflow-y: auto;
    }
    .drawer-section-title {
      font-size: 1.25em;
      font-weight: 900;
      color: #1a232b;
      margin: 1.2em 0 0.7em 0;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .team-details {
      margin-bottom: 1.2em;
    }
    .team-arrow-box {
      background: #f6e4cb;
      border-radius: 0 2em 2em 0;
      padding: 1.2em 1.2em 1.2em 2.5em;
      margin-left: -1.5em;
      font-size: 1.1em;
    }
    /* Enhanced admin drawer button styles */
    .drawer-box-btn {
      background: linear-gradient(120deg, #fffbe6 0%, #ffe7b2 60%, #f6e4cb 100%);
      width: 82vw;
      max-width: 440px;
      min-height: 92px;
      border-radius: 52px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 900;
      font-size: 1.7em;
      color: #1a232b;
      letter-spacing: 3px;
      box-shadow: 0 10px 40px #d6ac41aa, 0 2px 0 #fff8 inset, 0 0 0 2.5px #fffbe6 inset, 0 0 0 0.5px #e7c97a;
      border: 3.5px solid #d6af41;
      cursor: pointer;
      margin: 0;
      transition: box-shadow 0.18s, transform 0.12s, filter 0.13s, border 0.13s;
      outline: none;
      text-transform: uppercase;
      margin-bottom: 0;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(3.5px) saturate(1.12);
      -webkit-backdrop-filter: blur(3.5px) saturate(1.12);
      gap: 1.3em;
      padding-left: 2.7em;
      padding-right: 1.7em;
      border-bottom: 6px solid #e7c97a;
      box-sizing: border-box;
      text-shadow: 0 2px 8px #fff8, 0 1px 0 #e7c97a;
      filter: drop-shadow(0 2px 8px #fffbe6cc);
    }
    .drawer-box-btn:hover, .drawer-box-btn:focus {
      box-shadow: 0 20px 64px #d6ac41cc, 0 2px 0 #fff inset, 0 0 0 2.5px #fffbe6 inset, 0 0 0 0.5px #e7c97a;
      filter: brightness(1.09) saturate(1.13) drop-shadow(0 4px 16px #ffe7b2cc);
      border-bottom: 9px solid #e7c97a;
      border-color: #e7c97a;
    }
    .drawer-box-btn:active {
      filter: brightness(0.97);
      transform: scale(0.97);
      border-bottom: 3px solid #e7c97a;
    }
    .drawer-box-btn::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border-radius: 52px;
      pointer-events: none;
      box-shadow: 0 2.5px 0 #fff inset, 0 0 24px #fffbe6cc inset;
      opacity: 0.18;
    }
    .drawer-box-btn .btn-icon {
      width: 2.5em;
      height: 2.5em;
      min-width: 2.5em;
      min-height: 2.5em;
      border-radius: 50%;
      background: linear-gradient(135deg, #fffbe6 60%, #ffe7b2 100%);
      box-shadow: 0 2px 12px #d6ac4133, 0 0 0 1.5px #e7c97a;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.3em;
      font-size: 1.25em;
      color: #d6af41;
      border: 2px solid #e7c97a;
      position: relative;
      filter: drop-shadow(0 1px 4px #fffbe6cc);
    }
    /* Ripple effect */
    .drawer-box-btn:active::before {
      content: '';
      position: absolute;
      left: 50%;
      top: 50%;
      width: 120%;
      height: 120%;
      background: rgba(214,175,65,0.13);
      border-radius: 50%;
      transform: translate(-50%,-50%) scale(1.1);
      animation: ripple 0.4s linear;
      z-index: 1;
    }
    @keyframes ripple {
      0% { opacity: 0.5; transform: translate(-50%,-50%) scale(0.7); }
      100% { opacity: 0; transform: translate(-50%,-50%) scale(1.2); }
    }
    .drawer-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.18);
      z-index: 2500;
      display: none;
    }
    .drawer-overlay.open {
      display: block;
    }
  </style>
  <script>
    function openDrawer() {
      document.getElementById('drawerMenu').classList.add('open');
      document.getElementById('drawerMenu').setAttribute('aria-hidden', 'false');
      document.getElementById('drawerMenu').focus();
      document.getElementById('drawerOverlay').classList.add('open');
      document.getElementById('hamburgerBtn').setAttribute('aria-expanded', 'true');
    }
    function closeDrawer() {
      document.getElementById('drawerMenu').classList.remove('open');
      document.getElementById('drawerMenu').setAttribute('aria-hidden', 'true');
      document.getElementById('drawerOverlay').classList.remove('open');
      document.getElementById('hamburgerBtn').setAttribute('aria-expanded', 'false');
    }
  </script>
  <div style="width:100vw;display:flex;justify-content:center;margin-top:1em;z-index:3;position:relative;">
    <input id="teamSearchInput" type="text" placeholder="Search Team Number..." style="font-size:1.1em;padding:0.7em 1em;border-radius:18px;border:none;background:#fffbe6;color:#1a232b;font-weight:700;width:92vw;max-width:700px;box-shadow:0 2px 13px #d6ac4112;outline:none;" oninput="filterTeams()" />
  </div>
  <div style="width:100vw;display:flex;justify-content:center;margin-top:1.5em;z-index:3;position:relative;">
    <form id="excelUploadForm" action="/admin/upload_excel" method="post" enctype="multipart/form-data" style="display:flex;flex-direction:column;align-items:center;gap:0.7em;width:92vw;max-width:700px;background:#fffbe6;border-radius:32px;padding:1.2em 1.2em 1.2em 1.2em;box-shadow:0 2px 13px #d6ac4112;">
      <label for="excelFile" style="font-size:1.2em;font-weight:900;color:#1a232b;letter-spacing:1px;margin-bottom:0.2em;text-transform:uppercase;">Upload Excel File</label>
      <input type="file" id="excelFile" name="excel_file" accept=".xlsx,.xls" required style="font-size:1em;padding:0.7em 1em;border-radius:18px;border:none;background:#d6af41;color:#1a232b;font-weight:700;" />
      <button type="submit" style="background:#d6af41;border:none;border-radius:48px;width:100%;min-height:50px;font-family:'Montserrat',Arial,sans-serif;font-weight:900;font-size:1.2em;color:#1a232b;letter-spacing:2px;box-shadow:0 2px 13px #d6ac4112;margin:0 auto;cursor:pointer;text-transform:uppercase;transition:filter 0.13s,box-shadow 0.13s;outline:none;display:flex;align-items:center;justify-content:center;">IMPORT TO DATABASE</button>
    </form>
  </div>
  <div class="team-list-section">
    {% for team in teams %}
    <div class="team-card-wrapper" data-team-num="{{ team.team_num }}">
      <div class="team-members-title">TEAM MEMBERS</div>
      <div class="team-card">
        <div class="team-members-box">
          <ol class="team-members-list">
            {% for idx in range(5) %}
              <li>{% if team.members|length > idx %}{{ team.members[idx] }}{% else %}Â {% endif %}</li>
            {% endfor %}
          </ol>
        </div>
        <div class="team-no-box" style="display:flex;flex-direction:column;align-items:center;justify-content:center;">
          <div>TEAM<br>{{ team.team_num }}</div>
          <form method="post" action="/admin/remove_team" style="margin-top:0.7em;">
            <input type="hidden" name="team_num" value="{{ team.team_num }}" />
            <button type="submit" onclick="return confirm('Are you sure you want to remove team {{ team.team_num }}?');" style="background:#e74c3c;color:#fff;border:none;border-radius:18px;padding:0.4em 1.2em;font-weight:900;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #e74c3c22;">Remove</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  </div>
</body>
</html>
